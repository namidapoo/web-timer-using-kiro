# 実装計画

- [x] 1. プロジェクト構造とコア型定義の設定

  - src/types/timer.ts にタイマー関連の TypeScript インターフェースを作成
  - TimerState、TimerAction、UseTimerReturn などの型を定義
  - _要件: 1.1, 1.2, 1.3, 1.4_

- [x] 2. ユーティリティ関数の実装

  - src/utils/timeFormatter.ts に時間フォーマット関数を作成
  - 秒数を MM:SS 形式に変換する関数を実装
  - 入力値のバリデーション関数を実装
  - ユーティリティ関数の単体テストを作成
  - _要件: 3.1, 1.1, 1.2, 1.3_

- [x] 3. useTimer カスタムフックの実装
- [x] 3.1 基本的なタイマー状態管理を実装

  - useReducer を使用してタイマー状態を管理するロジックを作成
  - SET_TIME、START、PAUSE、RESET、TICK、COMPLETE アクションを処理
  - _要件: 2.1, 2.2, 2.3, 2.4_

- [x] 3.2 タイマーカウントダウン機能を実装

  - setInterval を使用した正確なカウントダウンロジックを作成
  - performance.now() を使用した高精度時間計測を実装
  - タイマー完了時の自動停止機能を実装
  - _要件: 2.1, 3.2, 4.4_

- [x] 3.3 useTimer フックの単体テストを作成

  - タイマー開始、停止、リセット機能のテストを作成
  - 時間設定とカウントダウンのテストを作成
  - エラーハンドリングのテストを作成
  - _要件: 2.1, 2.2, 2.3, 2.4, 2.5_

- [x] 4. TimeInput コンポーネントの実装
- [x] 4.1 時間入力フィールドコンポーネントを作成

  - src/components/TimeInput/TimeInput.tsx に分・秒入力フィールドを作成
  - 0-59 の範囲バリデーションを実装
  - 無効な入力値のエラーメッセージ表示を実装
  - _要件: 1.1, 1.2, 1.3, 1.4_

- [x] 4.2 TimeInput のスタイリングを実装

  - TimeInput.module.css にレスポンシブなスタイルを作成
  - デスクトップとモバイル対応のレイアウトを実装
  - エラー状態の視覚的フィードバックを実装
  - _要件: 5.1, 5.2, 5.3_

- [x] 4.3 TimeInput コンポーネントのテストを作成

  - 入力値バリデーションのテストを作成
  - エラーメッセージ表示のテストを作成
  - キーボードナビゲーションのテストを作成
  - _要件: 1.1, 1.2, 1.3, 1.4, 5.4_

- [x] 5. TimerDisplay コンポーネントの実装
- [x] 5.1 時間表示コンポーネントを作成

  - src/components/TimerDisplay/TimerDisplay.tsx に残り時間表示を作成
  - MM:SS 形式での時間表示を実装
  - 10 秒以下での警告表示（赤色）を実装
  - _要件: 3.1, 3.2, 3.3_

- [x] 5.2 TimerDisplay のアニメーションとスタイリングを実装

  - TimerDisplay.module.css に視覚的エフェクトを作成
  - カウントダウンの滑らかなアニメーションを実装
  - 完了時の視覚的インジケーターを実装
  - _要件: 3.2, 3.4_

- [x] 5.3 TimerDisplay コンポーネントのテストを作成

  - 時間表示フォーマットのテストを作成
  - 警告状態の表示テストを作成
  - 完了状態の表示テストを作成
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [x] 6. 通知機能の実装
- [x] 6.1 音声アラート機能を実装

  - public/sounds/alarm.mp3 にアラート音声ファイルを配置
  - HTML5 Audio API を使用した音声再生機能を実装
  - 音声再生失敗時のエラーハンドリングを実装
  - _要件: 4.1_

- [x] 6.2 ブラウザ通知機能を実装

  - Notification API を使用したブラウザ通知を実装
  - 通知許可の要求と許可状態の管理を実装
  - 通知拒否時のフォールバック処理を実装
  - _要件: 4.2_

- [x] 6.3 完了メッセージ表示を実装

  - タイマー完了時の画面メッセージ表示を実装
  - 完了状態のリセット機能を実装
  - _要件: 4.3, 4.4_

- [x] 7. メイン Timer コンポーネントの実装
- [x] 7.1 Timer コンポーネントの基本構造を作成

  - src/components/Timer/Timer.tsx にメインコンポーネントを作成
  - useTimer フックを統合してタイマー状態を管理
  - TimeInput と TimerDisplay コンポーネントを統合
  - _要件: 2.1, 2.2, 2.3, 2.4, 2.5_

- [x] 7.2 タイマー制御ボタンを実装

  - 開始、停止、リセットボタンを作成
  - ボタンの状態管理（有効/無効）を実装
  - タイマー実行中の入力フィールド無効化を実装
  - _要件: 2.1, 2.2, 2.3, 2.4, 2.5_

- [x] 7.3 Timer コンポーネントのスタイリングを実装

  - Timer.module.css にメインレイアウトを作成
  - レスポンシブデザインを実装
  - タッチフレンドリーなボタンサイズを実装
  - _要件: 5.1, 5.2, 5.3_

- [x] 8. アプリケーション統合とテスト
- [x] 8.1 App.tsx に Timer コンポーネントを統合

  - 既存の App.tsx を更新して Timer コンポーネントを表示
  - グローバルスタイルを調整
  - _要件: すべての要件_

- [x] 8.2 統合テストを作成

  - 完全なユーザーフローのテストを作成（設定 → 開始 → 停止 → リセット）
  - エラーハンドリングの統合テストを作成
  - 通知機能の統合テストを作成
  - _要件: すべての要件_

- [x] 8.3 アクセシビリティとパフォーマンス最適化
  - キーボードナビゲーションのサポートを実装
  - ARIA ラベルとスクリーンリーダー対応を実装
  - React.memo と useCallback を使用したパフォーマンス最適化を実装
  - _要件: 5.4_
